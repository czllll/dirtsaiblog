---
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
---

<header class="flex items-center justify-between p-2 bg-background/70 px-8
                fixed top-0 left-0 right-0 z-50
                transition-all duration-300 ease-linear shadow-md rounded-full ">
    <a href="/" class="flex items-center space-x-4">
        <img src="/veg.png" alt="Logo" class="h-10 w-10" />
        <h1 class="text-xl font-bold">DIRTSAI</h1>
    </a>

    <nav class="flex items-center space-x-4">
        <Button asChild variant="link">
            <a href="/">Home</a>
        </Button>
        <Button asChild variant="link">
            <a href="/tags">Tags</a>
        </Button>
        <Button asChild variant="link">
            <a href="/blog/1">Blog</a>
        </Button>
        <Button asChild variant="link">
            <a href="/about">About</a>
        </Button>
    </nav>
</header>

<script>
    function setupHeaderScroll() {
        let lastScrollY = window.scrollY;
        const header = document.querySelector('header');
        const stickyWrapper = document.getElementById('sticky-wrapper');
        
        if (header) {
            const updateHeaderHeight = () => {
                const headerHeight = header.offsetHeight;
                document.documentElement.style.setProperty('--header-height', `${headerHeight}px`);
            };

            const updateHeader = () => {
                const currentScrollY = window.scrollY;
                if (currentScrollY > lastScrollY) {
                    header.classList.add('-translate-y-full');
                    header.classList.remove('translate-y-0');
                    if (stickyWrapper) {
                        stickyWrapper.style.setProperty('--sticky-top', '0px');
                    }
                } else {
                    header.classList.add('translate-y-0');
                    header.classList.remove('-translate-y-full');
                    if (stickyWrapper) {
                        stickyWrapper.style.setProperty('--sticky-top', 'var(--header-height)');
                    }
                }
                lastScrollY = currentScrollY;
            };

            window.addEventListener('scroll', updateHeader);
            window.addEventListener('resize', updateHeaderHeight);
            updateHeaderHeight();
            updateHeader();
        }
    }

    document.addEventListener('astro:page-load', setupHeaderScroll);
</script>